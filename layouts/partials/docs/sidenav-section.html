{{- $version := .version -}}
{{- $pageUrl := .pageUrl -}}

{{- $scratch := newScratch -}}

{{- $docs    := where .section "Section" "eq" "docs" -}}
{{- $node    := index (where $docs "IsNode" "eq" true) 0 -}}
{{- $pages   := where .section ".RelPermalink" "ne" $node.RelPermalink -}}


{{- range $pages -}}
    {{- $scratch.Add "sectionsForVersion" (slice .) -}}
{{- end -}}

{{- if and (ne ($scratch.Get "sectionsForVersion") nil) (gt (len ($scratch.Get "sectionsForVersion")) 0) -}}

{{- if $node -}}
<div class="sidenav-item">
<a href="{{- $node.RelPermalink -}}">{{- $node.Params.short -}}</a>
</div>
{{- end -}}

{{- range ($scratch.Get "sectionsForVersion") -}}
    {{- partial "docs/sidenav-link.html" (dict "ctx" . "pageUrl" $pageUrl "version" $version) -}}
{{- end -}}

<hr class="docs-nav-hr"/>
{{- end -}}