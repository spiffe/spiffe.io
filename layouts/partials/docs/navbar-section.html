{{- $version := .version -}}
{{- $pageUrl := .pageUrl -}}

{{- $scratch := newScratch -}}

{{- $docs    := where .section "Section" "eq" "docs" -}}
{{- $node    := index (where $docs "IsNode" "eq" true) 0 -}}
{{- $pages   := where .section ".RelPermalink" "ne" $node.RelPermalink -}}

{{- range $pages -}}
    {{- $scratch.Add "sectionsForVersion" (slice .) -}}
{{- end -}}

{{- $sectionsForVersion := $scratch.Get "sectionsForVersion" -}}
{{ if and $sectionsForVersion (gt (len $sectionsForVersion) 0) }}

{{- if $node -}}
    <span class="navbar-item is-size-5 has-text-weight-light is-uppercase">
        <a href="{{- $node.RelPermalink -}}" class="has-text-black">{{- $node.Params.short -}}</a>
    </span>
{{- end -}}

{{ range $sectionsForVersion }}
{{ partial "docs/navbar-link.html" (dict "ctx" . "pageUrl" $pageUrl "version" $version) }}
{{ end }}

<br />

{{ end }}