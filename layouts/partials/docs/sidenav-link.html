{{/* Expect to have context bound to ".ctx", and the top level
     "version" and "pageUrl" passed in with the context.
 */}}
{{/* In the current "ctx" the file path refers to the doc we are linking to, not the page we are on */}}
{{- $isThisPage := eq .ctx.RelPermalink .pageUrl -}}
{{- $title := cond (isset .ctx.Params "navtitle") (.ctx.Params.navtitle) .ctx.Title -}}
{{- $short := cond (isset .ctx.Params "short") (.ctx.Params.short) $title -}}
{{- $linkRef := .ctx.RelPermalink -}}
<a class="docs-nav-item{{ if $isThisPage }} is-active{{ end }}" href="{{ $linkRef }}">
  {{ $short }}
</a>
{{- if $isThisPage -}}
<div class="toc">
  <!-- generated at runtime  -->
</div>
{{- end -}}